<section class="section">
  <div class="container">
    <div class="card">
      <div class="card-content">
        <div class="columns">
          <div class="column is-one-third">
            <div>
               <span style="display: flex; flex-direction: row; align-items: baseline;">
                <h2>My Chatrooms</h2>
                <small style="margin-left:10px;">Logged in as {{user?.name}}</small>
              </span>
              <button (click)="openModalJoinRoom()" class="button is-primary">Join Room</button>
              <button (click)="openModalCreateRoom()" class="button is-link">Create Room</button>
            </div>
            <div *ngIf="(rooms$|async)?.items?.length > 0;" class="rooms">
                 <mat-selection-list [multiple]="false" (selectionChange)="onSelectRoom($event)">
                    <mat-list-option *ngFor="let room of (rooms$ | async)?.items" [value]="room">
                      Name: {{room.name}} Id: {{room.id}}
                      <mat-divider></mat-divider>
                    </mat-list-option>
                  </mat-selection-list>
                  <mat-paginator
                    [length]="(rooms$ | async)?.meta?.totalItems"
                    [pageIndex]="(rooms$ | async)?.meta?.currentPage"
                    [pageSize]="(rooms$ | async)?.meta?.itemsPerPage" (page)="onPaginateRooms($event)"
                    (page)="onPaginateRooms($event)"
                    [pageSizeOptions]="[10,25,50]"
                    [hidePageSize]="true"
                  ></mat-paginator>
            </div>
          </div>
          <div class="chatroom column is-two-third">
            <app-chat-room [chatRoom]="selectedRoom"></app-chat-room>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
